# Docker Compose configuration for local testing
#
# This configuration runs both the green agent (assessor) and
# purple agent (assessee) locally for integration testing.
#
# Usage:
#   docker-compose up -d          # Start both agents
#   docker-compose ps             # Check status
#   docker-compose logs -f        # View logs
#   docker-compose -f docker-compose-local.yaml \
#     logs green 2>&1 | tail -100
#   docker-compose down           # Stop and remove containers

services:
  green:
    build:
      context: .
      dockerfile: Dockerfile.green
    platform: linux/amd64
    ports:
      - "8001:9009"
    networks:
      - agentbeats
    container_name: green
    restart: unless-stopped
    environment:
      - PURPLE_AGENT_URL=http://purple:9010

  purple:
    build:
      context: .
      dockerfile: Dockerfile.purple
    platform: linux/amd64
    ports:
      - "8002:9010"
    networks:
      - agentbeats
    container_name: purple
    restart: unless-stopped

networks:
  agentbeats:
    driver: bridge
